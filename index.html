<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ZeroLog</title>
    <link rel="manifest" href="manifest.json">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9180492943097575" crossorigin="anonymous"></script>
    <style>
        :root { --bg: #000000; --card: #0a0a0a; --accent: #2563eb; --text: #ffffff; --dim: #888; }
        * { box-sizing: border-box; font-family: -apple-system, sans-serif; }
        body { background: var(--bg); color: var(--text); margin: 0; padding: 20px; padding-bottom: 200px; }
        
        /* Layout & Tabs */
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        h1 { font-style: italic; font-weight: 900; letter-spacing: -1px; margin: 0; }
        .tabs { display: flex; gap: 20px; margin-bottom: 20px; border-bottom: 1px solid #222; }
        .tab { padding: 10px 0; color: var(--dim); cursor: pointer; font-size: 12px; text-transform: uppercase; font-weight: bold; }
        .tab.active { color: var(--accent); border-bottom: 2px solid var(--accent); }

        /* Workout UI */
        .day-picker { display: flex; gap: 8px; overflow-x: auto; margin-bottom: 20px; padding-bottom: 5px; }
        .day { padding: 8px 16px; border-radius: 20px; background: var(--card); font-size: 12px; cursor: pointer; color: var(--dim); white-space: nowrap; }
        .day.active { background: var(--accent); color: white; }
        
        .exercise-card { background: var(--card); border-radius: 12px; padding: 15px; margin-bottom: 15px; border: 1px solid #1a1a1a; }
        .ex-header { display: flex; justify-content: space-between; color: var(--accent); font-size: 11px; font-weight: bold; text-transform: uppercase; margin-bottom: 15px; }
        .set-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; padding: 10px; background: #111; border-radius: 6px; }
        .delete-set { color: #ff4444; font-size: 20px; cursor: pointer; padding-left: 10px; }
        
        .input-group { display: flex; gap: 10px; align-items: center; margin-top: 15px; }
        input { background: #111; border: 1px solid #222; color: white; padding: 12px; border-radius: 8px; width: 100%; text-align: center; font-size: 16px; }
        
        /* Rest Day UI */
        .rest-day-msg { text-align: center; padding: 40px 20px; color: var(--dim); font-style: italic; background: var(--card); border-radius: 12px; border: 1px dashed #333; }

        /* Timer Banner */
        #timer-banner { position: fixed; bottom: 70px; left: 10px; right: 10px; background: var(--accent); color: white; padding: 15px; display: none; justify-content: space-between; align-items: center; z-index: 1001; border-radius: 12px; box-shadow: 0 -5px 20px rgba(0,0,0,0.5); }
        .timer-presets { display: flex; gap: 5px; }
        .timer-presets button { padding: 6px 10px; font-size: 11px; background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.3); }

        /* General UI Elements */
        button { background: var(--accent); color: white; border: none; padding: 12px; border-radius: 8px; font-weight: bold; cursor: pointer; transition: opacity 0.2s; }
        button:active { opacity: 0.7; }
        .btn-complete { width: 100%; padding: 18px; margin-top: 10px; text-transform: uppercase; letter-spacing: 1px; }
        
        #modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 2000; justify-content: center; align-items: center; }
        .modal { background: var(--card); padding: 25px; border-radius: 15px; text-align: center; border: 1px solid #333; width: 85%; max-width: 320px; }

        .ad-container { position: fixed; bottom: 0; left: 0; width: 100%; background: #000; height: 60px; text-align: center; z-index: 1000; border-top: 1px solid #222; padding-top: 5px; }
    </style>
</head>
<body>

    <div class="header">
        <h1>ZEROLOG</h1>
        <button id="add-ex-btn" onclick="addExercise()">+</button>
    </div>

    <div class="tabs">
        <div class="tab active" id="tab-workout" onclick="showSection('workout')">Workout</div>
        <div class="tab" id="tab-calculator" onclick="showSection('calculator')">Calculator</div>
    </div>

    <div id="section-workout">
        <div class="day-picker" id="dayPicker"></div>
        <div id="workoutArea"></div>
        <button class="btn-complete" id="complete-btn" onclick="openModal()">Complete Workout</button>
    </div>

    <div id="section-calculator" style="display:none;">
        <div class="exercise-card">
            <h3 style="margin-top:0">Plate Calculator</h3>
            <p style="font-size:12px; color:var(--dim)">Enter total weight (includes 20kg bar)</p>
            <input type="number" id="target-weight" placeholder="Total kg (e.g. 100)">
            <div id="calc-result" style="color: var(--accent); font-weight: bold; margin: 20px 0; font-size: 18px; text-align: center;"></div>
            <button onclick="calcPlates()" style="width:100%;">Calculate Per Side</button>
        </div>
    </div>

    <div id="timer-banner">
        <div>
            <div style="font-size: 10px; opacity: 0.8; font-weight: bold;">RESTING</div>
            <div id="timer-display" style="font-size: 22px; font-weight: 900;">0:00</div>
        </div>
        <div class="timer-presets">
            <button onclick="startTimer(60)">60s</button>
            <button onclick="startTimer(180)">180s</button>
            <button onclick="stopTimer()" style="background: #000; color: white;">SKIP</button>
        </div>
    </div>

    <div id="modal-overlay">
        <div class="modal">
            <h3 style="margin-top:0">Complete Workout?</h3>
            <p style="color:var(--dim); font-size: 14px;">This will clear today's logs and reset the session.</p>
            <div style="display:flex; gap:10px; margin-top:20px;">
                <button style="background:#222; flex:1" onclick="closeModal()">Cancel</button>
                <button style="flex:1" onclick="finishWorkout()">Confirm</button>
            </div>
        </div>
    </div>

    <div class="ad-container">
        <ins class="adsbygoogle" style="display:inline-block;width:320px;height:50px" data-ad-client="ca-pub-9180492943097575" data-ad-slot="6115261796"></ins>
        <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
    </div>

    <script>
        let currentDay = new Date().toLocaleDateString('en-US', { weekday: 'short' });
        let workouts = JSON.parse(localStorage.getItem('zerolog_data')) || [];
        let restDays = JSON.parse(localStorage.getItem('zerolog_rest_days')) || [];
        let timerInterval;

        const days = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];

        function init() {
            const picker = document.getElementById('dayPicker');
            picker.innerHTML = days.map(d => `<div class="day ${d === currentDay ? 'active' : ''}" onclick="setDay('${d}')">${d}</div>`).join('');
            render();
        }

        function setDay(d) { currentDay = d; init(); }

        function toggleRestDay() {
            if (restDays.includes(currentDay)) {
                restDays = restDays.filter(d => d !== currentDay);
            } else {
                restDays.push(currentDay);
            }
            localStorage.setItem('zerolog_rest_days', JSON.stringify(restDays));
            render();
        }

        function addExercise() {
            const name = prompt("Exercise Name:");
            if (name) { 
                workouts.push({ id: Date.now(), day: currentDay, name, sets: [] }); 
                save(); 
            }
        }

        function addSet(exId, weight, reps) {
            if (!weight || !reps) return;
            const ex = workouts.find(w => w.id === exId);
            ex.sets.push({ weight, reps });
            save();
            startTimer(90); 
        }

        function deleteSet(exId, idx) {
            const ex = workouts.find(w => w.id === exId);
            ex.sets.splice(idx, 1);
            save();
        }

        function startTimer(seconds) {
            clearInterval(timerInterval);
            document.getElementById('timer-banner').style.display = 'flex';
            let timeLeft = seconds;
            updateTimerDisplay(timeLeft);
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay(timeLeft);
                if (timeLeft <= 0) stopTimer();
            }, 1000);
        }

        function updateTimerDisplay(s) {
            let mins = Math.floor(s / 60);
            let secs = s % 60;
            document.getElementById('timer-display').innerText = `${mins}:${secs < 10 ? '0' : ''}${secs}`;
        }

        function stopTimer() { clearInterval(timerInterval); document.getElementById('timer-banner').style.display = 'none'; }

        function calcPlates() {
            let total = document.getElementById('target-weight').value;
            if (!total || total < 20) {
                document.getElementById('calc-result').innerText = "Min 20kg (Bar)";
                return;
            }
            let side = (total - 20) / 2;
            document.getElementById('calc-result').innerText = `${side} kg per side`;
        }

        function showSection(sect) {
            document.getElementById('section-workout').style.display = sect === 'workout' ? 'block' : 'none';
            document.getElementById('section-calculator').style.display = sect === 'calculator' ? 'block' : 'none';
            document.getElementById('add-ex-btn').style.visibility = sect === 'workout' ? 'visible' : 'hidden';
            document.getElementById('tab-workout').classList.toggle('active', sect === 'workout');
            document.getElementById('tab-calculator').classList.toggle('active', sect === 'calculator');
        }

        function openModal() { document.getElementById('modal-overlay').style.display = 'flex'; }
        function closeModal() { document.getElementById('modal-overlay').style.display = 'none'; }
        
        function finishWorkout() {
            workouts = workouts.filter(w => w.day !== currentDay);
            save();
            closeModal();
        }

        function save() { 
            localStorage.setItem('zerolog_data', JSON.stringify(workouts)); 
            render(); 
        }

        function render() {
            const area = document.getElementById('workoutArea');
            const isRestDay = restDays.includes(currentDay);
            document.getElementById('complete-btn').style.display = isRestDay ? 'none' : 'block';

            if (isRestDay) {
                area.innerHTML = `
                    <div class="rest-day-msg">
                        <p>ðŸ§˜ Today is a Recovery Day.</p>
                        <button onclick="toggleRestDay()" style="background:#222; font-size:12px;">Resume Training</button>
                    </div>`;
                return;
            }

            const todaysEx = workouts.filter(w => w.day === currentDay);
            let html = todaysEx.map(ex => `
                <div class="exercise-card">
                    <div class="ex-header">
                        <span>${ex.name}</span>
                        <span onclick="workouts=workouts.filter(w=>w.id!=${ex.id});save()" style="cursor:pointer">âœ•</span>
                    </div>
                    ${ex.sets.map((s, i) => `
                        <div class="set-row">
                            <span>Set ${i+1}: ${s.weight}kg x ${s.reps}</span>
                            <span class="delete-set" onclick="deleteSet(${ex.id}, ${i})">Ã—</span>
                        </div>
                    `).join('')}
                    <div class="input-group">
                        <input type="number" placeholder="kg" id="w-${ex.id}">
                        <input type="number" placeholder="reps" id="r-${ex.id}">
                        <button onclick="addSet(${ex.id}, document.getElementById('w-${ex.id}').value, document.getElementById('r-${ex.id}').value)">âœ“</button>
                    </div>
                </div>
            `).join('');

            html += `<button onclick="toggleRestDay()" style="width:100%; background:transparent; color:var(--dim); font-size:11px; border:1px dashed #333; margin-top:20px;">Mark today as REST DAY</button>`;
            area.innerHTML = html;
        }

        init();
    </script>
</body>
</html>
